<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë°ì´í„° ë¶„ì„ í€´ì¦ˆ</title>
  <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 800px; margin: auto; }
    .question { font-weight: bold; margin-bottom: 10px; white-space: pre-wrap; }
    .code-input { width: 100%; height: 150px; margin-top: 10px; font-family: monospace; font-size: 14px; }
    .result { margin-top: 15px; font-weight: bold; white-space: pre-wrap; }
    button { margin-top: 15px; padding: 10px; margin-right: 10px; }
    .section { margin-bottom: 30px; }
    .description { background: #f5f5f5; padding: 10px; margin-bottom: 15px; border-left: 4px solid #999; white-space: pre-wrap; }
    select { margin-top: 10px; padding: 8px; font-size: 14px; }
  </style>
</head>
<body>
  <h1>ë°ì´í„° ë¶„ì„ê°€ í›ˆë ¨ ì›¹ì‚¬ì´íŠ¸</h1>
  <label for="levelSelect">ë ˆë²¨ ì„ íƒ: </label>
  <select id="levelSelect" onchange="changeLevel()">
    <option value="basic">ê¸°ì´ˆ</option>
    <option value="intermediate">ì¤‘ê¸‰</option>
    <option value="advanced">ê³ ê¸‰</option>
  </select>
  <div class="description" id="description"></div>
  <div class="question" id="question"></div>
  <textarea id="codeInput" class="code-input" placeholder="ì—¬ê¸°ì— ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”"></textarea>
  <div>
    <button onclick="checkCode()">ì œì¶œ</button>
    <button onclick="nextQuestion()">ë‹¤ìŒ ë¬¸ì œ</button>
    <button onclick="repeatQuestion()">ë‹¤ì‹œ í’€ê¸°</button>
  </div>
  <div class="result" id="result"></div>
  <div class="section" id="explanation"></div>
  <script>
    let pyodide;
    async function loadPyodideAndPackages() {
      pyodide = await loadPyodide();
      await pyodide.loadPackage(["numpy", "pandas"]);
    }
    loadPyodideAndPackages();
    const allQuizData = {
      basic: [
        {
          description: `ğŸ“˜ ë³€ìˆ˜ë€?
ë³€ìˆ˜ëŠ” ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ì´ë¦„í‘œì…ë‹ˆë‹¤.
ì˜ˆ: x = 10 ì€ ìˆ«ì 10ì„ ë³€ìˆ˜ xì— ì €ì¥í•œë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.`,
          question: `íŒŒì´ì¬ì—ì„œ ë³€ìˆ˜ xì— ìˆ«ì 10ì„ ì €ì¥í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?
ê·¸ë¦¬ê³  xë¥¼ ì¶œë ¥í•´ë³´ì„¸ìš”.`,
          answerCode: "x = 10
print(x)",
          explanation: `ë³€ìˆ˜ xì— 10ì„ ì €ì¥í•œ ë’¤, print(x)ë¡œ ì¶œë ¥í•©ë‹ˆë‹¤.`
        },
        {
          description: `ğŸ“˜ ë¦¬ìŠ¤íŠ¸ì™€ í•©ê³„
sum()ì€ ë¦¬ìŠ¤íŠ¸ ë‚´ë¶€ ìˆ«ìì˜ í•©ê³„ë¥¼ êµ¬í•©ë‹ˆë‹¤.`,
          question: `ë¦¬ìŠ¤íŠ¸ a = [1, 2, 3]ì˜ í•©ì„ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.`,
          answerCode: "a = [1, 2, 3]
print(sum(a))",
          explanation: `sum() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ë¦¬ìŠ¤íŠ¸ ë‚´ë¶€ ìˆ«ìì˜ í•©ì„ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`
        },
        {
          description: `ğŸ“˜ í‰ê·  êµ¬í•˜ê¸°
Pythonì˜ len()ê³¼ sum()ì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ í‰ê· ì„ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`,
          question: `ë¦¬ìŠ¤íŠ¸ scores = [80, 90, 100]ì˜ í‰ê· ì„ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.`,
          answerCode: "scores = [80, 90, 100]
print(sum(scores)/len(scores))",
          explanation: `sum(scores)/len(scores) ëŠ” ì „ì²´ í•©ì„ ìš”ì†Œ ìˆ˜ë¡œ ë‚˜ëˆ  í‰ê· ì„ ê³„ì‚°í•©ë‹ˆë‹¤.`
        },
        {
          description: `ğŸ“˜ pandasì˜ DataFrame ë§Œë“¤ê¸°
pd.DataFrameì€ í‘œ í˜•íƒœì˜ ë°ì´í„°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`,
          question: `pandasë¥¼ ì´ìš©í•˜ì—¬ ë‹¤ìŒ ë°ì´í„°ë¥¼ DataFrameìœ¼ë¡œ ë§Œë“¤ê³  ì¶œë ¥í•˜ì„¸ìš”:
ì´ë¦„: ['Kim', 'Lee'], ì ìˆ˜: [90, 85]`,
          answerCode: "import pandas as pd
data = {'ì´ë¦„': ['Kim', 'Lee'], 'ì ìˆ˜': [90, 85]}
df = pd.DataFrame(data)
print(df)",
          explanation: `ë”•ì…”ë„ˆë¦¬ë¥¼ pd.DataFrameì— ë„£ìœ¼ë©´ í‘œ í˜•íƒœë¡œ ì¶œë ¥ë©ë‹ˆë‹¤.`
        },
        {
          description: `ğŸ“˜ íŠ¹ì • ì—´ ì„ íƒí•˜ê¸°
DataFrameì—ì„œ íŠ¹ì • ì—´ë§Œ ì„ íƒí•˜ë ¤ë©´ df['ì»¬ëŸ¼ëª…']ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.`,
          question: `dfì—ì„œ 'ì ìˆ˜' ì—´ë§Œ ì„ íƒí•˜ì—¬ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.`,
          answerCode: "print(df['ì ìˆ˜'])",
          explanation: `df['ì»¬ëŸ¼ëª…'] í˜•íƒœë¡œ íŠ¹ì • ì—´ë§Œ ì„ íƒí•´ ì¶œë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`
        }
      ]
    };
    let current = 0;
    let currentLevel = 'basic';
    let quizData = allQuizData[currentLevel];
    function showQuestion() {
      document.getElementById('result').textContent = "";
      document.getElementById('explanation').textContent = "";
      document.getElementById('question').textContent = quizData[current].question;
      document.getElementById('description').textContent = quizData[current].description;
      document.getElementById('codeInput').value = "";
    }
    async function checkCode() {
      const userCode = document.getElementById('codeInput').value.trim();
      const resultDiv = document.getElementById('result');
      const explainDiv = document.getElementById('explanation');
      resultDiv.style.color = "black";
      resultDiv.textContent = "â³ ì‹¤í–‰ ì¤‘...";
      try {
        const output = await pyodide.runPythonAsync(`import sys
from io import StringIO
output = StringIO()
sys.stdout = output
` + userCode + `
sys.stdout = sys.__stdout__
output.getvalue()`);
        resultDiv.textContent = `âœ… ì‹¤í–‰ ê²°ê³¼:
${output}`;
        resultDiv.style.color = "green";
      } catch (err) {
        resultDiv.textContent = `âŒ ì˜¤ë¥˜ ë°œìƒ:
${err}`;
        resultDiv.style.color = "red";
      }
      explainDiv.textContent = "ğŸ“˜ í•´ì„¤: " + quizData[current].explanation;
    }
    function nextQuestion() {
      current = (current + 1) % quizData.length;
      showQuestion();
    }
    function repeatQuestion() {
      showQuestion();
    }
    function changeLevel() {
      currentLevel = document.getElementById('levelSelect').value;
      quizData = allQuizData[currentLevel];
      current = 0;
      showQuestion();
    }
    showQuestion();
  </script>
</body>
</html>
